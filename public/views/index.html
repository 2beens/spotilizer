{{define "content"}}
  {{if .Data }}
  <script>
    var accessToken = '{{.Data.AccessToken}}';
    var refreshToken = '{{.Data.RefreshToken}}';
    var prevAccToken = getCookie("accessToken");
    var prevRefToken = getCookie("refreshToken");
    if (accessToken) {
      if (!prevAccToken || accessToken !== prevAccToken) {
        setCookie("accessToken", accessToken, 7);
      }
    } else {
      accessToken = prevAccToken;
    }
    if (refreshToken) {
      if (!prevRefToken || refreshToken !== prevRefToken) {
        setCookie("refreshToken", refreshToken, 7);
      }
    } else {
      refreshToken = prevRefToken;
    }

    window.accessToken = accessToken;
    window.refreshToken = refreshToken;

    if (accessToken && prevAccToken) {
      printSelfSpotifyInfo();
    }

    console.log(' > internal script 1 ran');
  </script>
  {{end}}

  <div class="jumbotron">
    <h1 class="display-3">Spotify Playlists Analyzer</h1>
    <p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
    
    <div id="login">
      <p><a class="btn btn-lg btn-success" href="/login" role="button">Log in to Spotify</a></p>
    </div>
    <div id="loggedin">
      <div id="user-profile">
      </div>
      <div id="oauth">
      </div>
      <p><a class="btn btn-lg btn-success" role="button" onclick="console.log('not implemented ...')">Obtain new token using the refresh token</a></p>
      <p><a class="btn btn-lg btn-success" role="button" onclick="printSelfSpotifyInfo()">Log Spotify info to console</a></p>
      <p><a class="btn btn-lg btn-success" role="button" onclick="getFavPlaylist()">Get Fav List</a></p>
    </div>
  </div>

  <div class="url-query">
    <h5>URL Query</h5>
    <div class="row">
      <div class="col-lg-11">
        <textarea name="query-val" id="query-text" cols="80%" rows="2">https://api.spotify.com/v1/me/albums/contains</textarea>
      </div>
      <div class="col-lg-1">
          <p><a class="btn btn-success" role="button" onclick="executeUrlQueryRequest()">Get!</a></p>
      </div>
      <div>
        <p id="query-result"></p>
      </div>
    </div>
  </div>

  <div class="row marketing">
    <div class="col-lg-6">
      <h4>Subheading</h4>
      <p>Donec id elit non mi porta gravida at eget metus. Maecenas faucibus mollis interdum.</p>

      <h4>Subheading</h4>
      <p>Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Cras mattis consectetur purus sit amet fermentum.</p>

      <h4>Subheading</h4>
      <p>Maecenas sed diam eget risus varius blandit sit amet non magna.</p>
    </div>

    <div class="col-lg-6">
      <h4>Subheading</h4>
      <p>Donec id elit non mi porta gravida at eget metus. Maecenas faucibus mollis interdum.</p>

      <h4>Subheading</h4>
      <p>Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Cras mattis consectetur purus sit amet fermentum.</p>

      <h4>Subheading</h4>
      <p>Maecenas sed diam eget risus varius blandit sit amet non magna.</p>
    </div>
  </div>
{{end}}